<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Latest Mathematics News & Discoveries - Auto-updated mathematical breakthroughs, research, and articles">
    <meta name="keywords" content="mathematics news, math research, mathematical discoveries, STEM news, Abdelouahab Mostafa">
    <meta name="author" content="Abdelouahab Mostafa">
    <title>Mathematics News Hub | Latest Discoveries & Research</title>
    <link rel="icon" href="OIP.webp" type="image/webp">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --dark: #1a202c;
            --light: #f7fafc;
            --card-bg: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .math-symbol {
            position: absolute;
            font-size: 3rem;
            color: rgba(255,255,255,0.1);
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-100px) rotate(180deg); }
        }

        /* Header */
        header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        #searchInput {
            width: 100%;
            padding: 1rem 3rem 1rem 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }

        #searchInput:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--gradient);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.05);
        }

        /* Filter Tabs */
        .filter-tabs {
            background: white;
            padding: 1.5rem 0;
            box-shadow: var(--shadow);
        }

        .tabs-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 0.8rem 2rem;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--dark);
        }

        .tab-btn:hover, .tab-btn.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: white;
            font-size: 1.5rem;
        }

        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* News Grid */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .news-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            cursor: pointer;
            animation: fadeInUp 0.5s;
        }

        .news-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--gradient);
        }

        .news-content {
            padding: 1.5rem;
        }

        .news-category {
            display: inline-block;
            padding: 0.3rem 1rem;
            background: var(--gradient);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .news-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--dark);
            line-height: 1.4;
        }

        .news-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
            font-size: 0.9rem;
            color: #999;
        }

        .news-source {
            font-weight: 600;
            color: var(--primary);
        }

        .read-more {
            background: var(--gradient);
            color: white;
            padding: 0.6rem 1.5rem;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
            display: inline-block;
        }

        .read-more:hover {
            transform: scale(1.05);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        .no-results h2 {
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        /* Footer */
        footer {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            margin-top: 4rem;
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.1);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .footer-description {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .footer-links a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--secondary);
        }

        .footer-social {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            text-decoration: none;
            transition: transform 0.3s;
        }

        .social-icon:hover {
            transform: translateY(-5px) scale(1.1);
        }

        .copyright {
            padding-top: 2rem;
            border-top: 2px solid #e0e0e0;
            color: #666;
            font-size: 0.95rem;
        }

        .creator-name {
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
            }

            .search-container {
                width: 100%;
                max-width: 100%;
            }

            .news-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .tabs-container {
                gap: 0.5rem;
            }

            .tab-btn {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }

        /* Scroll to Top Button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            z-index: 999;
        }

        .scroll-top.visible {
            display: flex;
        }

        .scroll-top:hover {
            transform: translateY(-5px) scale(1.1);
        }

        /* Advanced CSS Animations */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes zoomIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes rotateIn {
            from { transform: rotate(-200deg); opacity: 0; }
            to { transform: rotate(0); opacity: 1; }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(0.9); }
            20%, 40% { transform: scale(1.1); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        /* Particle system */
        .particle {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 15s infinite;
        }

        @keyframes particleFloat {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        /* Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-align: center;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            white-space: nowrap;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Progress bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Badge styles */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--gradient);
            color: white;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin: 0.25rem;
        }

        .badge-new {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .badge-hot {
            background: linear-gradient(135deg, #fc8181, #f56565);
            animation: pulse 2s infinite;
        }

        .badge-trending {
            background: linear-gradient(135deg, #f6ad55, #ed8936);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 20px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: slideInUp 0.5s;
        }

        .modal-close {
            position: absolute;
            right: 1.5rem;
            top: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #333;
        }

        /* Card hover effects */
        .news-card-3d {
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .news-card-3d:hover {
            transform: perspective(1000px) rotateY(10deg);
        }

        /* Glow effect */
        .glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5),
                        0 0 40px rgba(102, 126, 234, 0.3),
                        0 0 60px rgba(102, 126, 234, 0.1);
            animation: glowPulse 2s infinite;
        }

        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.8); }
        }

        /* Text effects */
        .gradient-text {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .animated-underline {
            position: relative;
            display: inline-block;
        }

        .animated-underline::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--gradient);
            transition: width 0.3s;
        }

        .animated-underline:hover::after {
            width: 100%;
        }

        /* Floating action button */
        .fab {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: all 0.3s;
            z-index: 999;
        }

        .fab:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }

        /* Stats counter */
        .stats-counter {
            display: inline-block;
            font-size: 2.5rem;
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Timeline styles */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: var(--gradient);
        }

        .timeline-item {
            margin: 2rem 0;
            position: relative;
            animation: slideInLeft 0.5s;
        }

        /* Ribbon */
        .ribbon {
            position: absolute;
            top: 10px;
            right: -5px;
            background: linear-gradient(135deg, #fc8181, #f56565);
            color: white;
            padding: 0.5rem 1rem;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .ribbon::before {
            content: '';
            position: absolute;
            left: 0;
            bottom: -10px;
            border-left: 5px solid transparent;
            border-right: 5px solid #c53030;
            border-top: 10px solid #c53030;
        }

        /* Star rating */
        .star-rating {
            display: inline-block;
            font-size: 1.5rem;
            color: #ffd700;
        }

        .star-rating .star {
            cursor: pointer;
            transition: color 0.2s;
        }

        .star-rating .star:hover,
        .star-rating .star.active {
            color: #ffa500;
            animation: bounceIn 0.3s;
        }

        /* Chip styles */
        .chip {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background: #f0f0f0;
            border-radius: 25px;
            margin: 0.25rem;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .chip:hover {
            background: var(--gradient);
            color: white;
            transform: translateY(-2px);
        }

        /* Loading dots */
        .loading-dots {
            display: inline-block;
        }

        .loading-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
            margin: 0 2px;
            animation: dotBounce 1.4s infinite both;
        }

        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes dotBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="math-symbol" style="top: 10%; left: 10%; animation-delay: 0s;">‚à´</div>
        <div class="math-symbol" style="top: 20%; left: 80%; animation-delay: 2s;">‚àë</div>
        <div class="math-symbol" style="top: 60%; left: 15%; animation-delay: 4s;">œÄ</div>
        <div class="math-symbol" style="top: 70%; left: 75%; animation-delay: 6s;">‚àû</div>
        <div class="math-symbol" style="top: 40%; left: 50%; animation-delay: 8s;">‚àÇ</div>
        <div class="math-symbol" style="top: 85%; left: 40%; animation-delay: 10s;">Œ∏</div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">üìê Math News Hub</div>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search mathematics news...">
                <button class="search-btn" onclick="searchNews()">üîç Search</button>
            </div>
        </div>
    </header>

    <!-- Filter Tabs -->
    <div class="filter-tabs">
        <div class="tabs-container">
            <button class="tab-btn active" onclick="filterNews('all')">All News</button>
            <button class="tab-btn" onclick="filterNews('algebra')">Algebra</button>
            <button class="tab-btn" onclick="filterNews('calculus')">Calculus</button>
            <button class="tab-btn" onclick="filterNews('geometry')">Geometry</button>
            <button class="tab-btn" onclick="filterNews('statistics')">Statistics</button>
            <button class="tab-btn" onclick="filterNews('number theory')">Number Theory</button>
            <button class="tab-btn" onclick="filterNews('topology')">Topology</button>
            <button class="tab-btn" onclick="filterNews('applied math')">Applied Math</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div id="loading" class="loading">
            <div class="spinner"></div>
            Loading latest mathematics news...
        </div>
        <div id="newsContainer" class="news-grid" style="display: none;"></div>
        <div id="noResults" class="no-results" style="display: none;">
            <h2>üîç No results found</h2>
            <p>Try searching with different keywords or browse all news.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">üìê Mathematics News Hub</div>
            <p class="footer-description">
                Your premier source for the latest mathematical discoveries, research breakthroughs, 
                and academic news from around the world. Stay updated with cutting-edge mathematics.
            </p>
            <div class="footer-links">
                <a href="index.html">Calculator</a>
                <a href="portfolio.html">Portfolio</a>
                <a href="math-news.html">Math News</a>
                <a href="#" onclick="scrollToTop()">Back to Top</a>
            </div>
            <div class="footer-social">
                <a href="#" class="social-icon" title="Twitter">üê¶</a>
                <a href="#" class="social-icon" title="GitHub">üíª</a>
                <a href="#" class="social-icon" title="LinkedIn">üíº</a>
                <a href="#" class="social-icon" title="Email">üìß</a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Mathematics News Hub. All rights reserved.</p>
                <p style="margin-top: 1rem;">Created with ‚ù§Ô∏è by <span class="creator-name">Abdelouahab Mostafa</span></p>
                <p style="margin-top: 0.5rem; font-size: 0.9rem;">Bringing mathematical knowledge to everyone, everywhere.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTopBtn" onclick="scrollToTop()">‚Üë</button>

    <script>
        let allNews = [];
        let currentFilter = 'all';

        // Simulated mathematics news data (In production, this would fetch from APIs like arXiv, ScienceDaily, etc.)
        const mathNewsData = [
            {
                title: "Breakthrough in Prime Number Theory",
                description: "Mathematicians discover new patterns in the distribution of prime numbers, potentially revolutionizing cryptography and number theory.",
                category: "Number Theory",
                source: "Nature Mathematics",
                date: "2025-12-09",
                url: "#",
                tags: ["prime numbers", "number theory", "cryptography"]
            },
            {
                title: "Revolutionary Approach to the Riemann Hypothesis",
                description: "A team of researchers presents a novel method that brings us closer to solving one of mathematics' greatest unsolved problems.",
                category: "Pure Mathematics",
                source: "Annals of Mathematics",
                date: "2025-12-08",
                url: "#",
                tags: ["riemann hypothesis", "pure mathematics", "complex analysis"]
            },
            {
                title: "AI Discovers New Mathematical Formulas",
                description: "Artificial intelligence system generates unexpected mathematical relationships, opening new avenues for research in algebra and calculus.",
                category: "Applied Math",
                source: "Science Daily",
                date: "2025-12-07",
                url: "#",
                tags: ["AI", "machine learning", "algebra", "calculus"]
            },
            {
                title: "Topology Breakthrough Solves Century-Old Problem",
                description: "Mathematicians resolve a 100-year-old conjecture in topology, with implications for physics and data analysis.",
                category: "Topology",
                source: "Mathematical Intelligencer",
                date: "2025-12-06",
                url: "#",
                tags: ["topology", "geometry", "mathematical physics"]
            },
            {
                title: "New Statistical Method Improves COVID-19 Modeling",
                description: "Researchers develop advanced statistical techniques for more accurate disease spread predictions and healthcare planning.",
                category: "Statistics",
                source: "Journal of Applied Statistics",
                date: "2025-12-05",
                url: "#",
                tags: ["statistics", "epidemiology", "data science"]
            },
            {
                title: "Geometric Discovery in Higher Dimensions",
                description: "Mathematicians uncover unexpected geometric properties in 8-dimensional space with applications in string theory.",
                category: "Geometry",
                source: "Geometry & Topology",
                date: "2025-12-04",
                url: "#",
                tags: ["geometry", "higher dimensions", "theoretical physics"]
            },
            {
                title: "Calculus Innovation Simplifies Complex Equations",
                description: "New calculus technique provides elegant solutions to previously intractable differential equations.",
                category: "Calculus",
                source: "Mathematical Methods",
                date: "2025-12-03",
                url: "#",
                tags: ["calculus", "differential equations", "analysis"]
            },
            {
                title: "Algebraic Structures in Quantum Computing",
                description: "Researchers discover new algebraic frameworks that could accelerate quantum algorithm development.",
                category: "Algebra",
                source: "Quantum Mathematics",
                date: "2025-12-02",
                url: "#",
                tags: ["algebra", "quantum computing", "abstract algebra"]
            },
            {
                title: "Graph Theory Advances Network Security",
                description: "New graph-theoretic algorithms enhance cybersecurity by detecting network vulnerabilities more efficiently.",
                category: "Applied Math",
                source: "Discrete Mathematics",
                date: "2025-12-01",
                url: "#",
                tags: ["graph theory", "cybersecurity", "algorithms"]
            },
            {
                title: "Fractal Patterns Found in Financial Markets",
                description: "Mathematicians identify fractal structures in stock market data, improving predictive models for trading.",
                category: "Applied Math",
                source: "Mathematical Finance",
                date: "2025-11-30",
                url: "#",
                tags: ["fractals", "financial mathematics", "chaos theory"]
            },
            {
                title: "Number Theory Application in Blockchain",
                description: "Advanced number-theoretic concepts strengthen blockchain security and efficiency in cryptocurrency systems.",
                category: "Number Theory",
                source: "Cryptography Today",
                date: "2025-11-29",
                url: "#",
                tags: ["number theory", "blockchain", "cryptography"]
            },
            {
                title: "Statistical Learning Theory Breakthrough",
                description: "New theoretical framework unifies various machine learning approaches under single mathematical paradigm.",
                category: "Statistics",
                source: "Statistical Science",
                date: "2025-11-28",
                url: "#",
                tags: ["statistics", "machine learning", "theory"]
            },
            {
                title: "Euler's Identity: New Interpretation Discovered",
                description: "Mathematicians reveal deeper connections between Euler's famous identity and modern mathematical physics.",
                category: "Pure Mathematics",
                source: "American Mathematical Monthly",
                date: "2025-11-27",
                url: "#",
                tags: ["euler", "complex numbers", "mathematical beauty"]
            },
            {
                title: "Optimization Algorithms Transform Logistics",
                description: "Advanced mathematical optimization reduces global shipping costs by 30% through improved routing algorithms.",
                category: "Applied Math",
                source: "Operations Research",
                date: "2025-11-26",
                url: "#",
                tags: ["optimization", "logistics", "algorithms"]
            },
            {
                title: "Knot Theory Advances DNA Research",
                description: "Mathematical knot theory provides new insights into DNA structure and replication mechanisms.",
                category: "Topology",
                source: "Journal of Mathematical Biology",
                date: "2025-11-25",
                url: "#",
                tags: ["knot theory", "topology", "biology"]
            },
            {
                title: "Pythagoras Theorem: 3000 Years Later Still Inspiring",
                description: "New applications of the ancient theorem emerge in modern architecture and computer graphics.",
                category: "Geometry",
                source: "Mathematics Magazine",
                date: "2025-11-24",
                url: "#",
                tags: ["pythagoras", "geometry", "applications"]
            }
        ];

        // Initialize
        function init() {
            allNews = mathNewsData;
            displayNews(allNews);
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('newsContainer').style.display = 'grid';
            }, 1000);
        }

        // Display news
        function displayNews(newsArray) {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '';

            if (newsArray.length === 0) {
                document.getElementById('newsContainer').style.display = 'none';
                document.getElementById('noResults').style.display = 'block';
                return;
            }

            document.getElementById('noResults').style.display = 'none';
            document.getElementById('newsContainer').style.display = 'grid';

            newsArray.forEach((news, index) => {
                const card = document.createElement('div');
                card.className = 'news-card';
                card.style.animationDelay = `${index * 0.1}s`;
                
                const categoryColors = {
                    'Number Theory': '#667eea',
                    'Pure Mathematics': '#764ba2',
                    'Applied Math': '#f093fb',
                    'Topology': '#4facfe',
                    'Statistics': '#43e97b',
                    'Geometry': '#fa709a',
                    'Calculus': '#fee140',
                    'Algebra': '#30cfd0'
                };

                card.innerHTML = `
                    <div class="news-image" style="background: linear-gradient(135deg, ${categoryColors[news.category] || '#667eea'}, ${categoryColors[news.category] || '#764ba2'}); display: flex; align-items: center; justify-content: center; font-size: 4rem;">
                        ${getCategoryIcon(news.category)}
                    </div>
                    <div class="news-content">
                        <span class="news-category">${news.category}</span>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-description">${news.description}</p>
                        <div class="news-meta">
                            <span class="news-source">${news.source}</span>
                            <span class="news-date">${formatDate(news.date)}</span>
                        </div>
                        <div style="margin-top: 1rem;">
                            <a href="${news.url}" class="read-more" target="_blank">Read More ‚Üí</a>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // Get category icon
        function getCategoryIcon(category) {
            const icons = {
                'Number Theory': 'üî¢',
                'Pure Mathematics': '‚àû',
                'Applied Math': 'üìä',
                'Topology': 'üåê',
                'Statistics': 'üìà',
                'Geometry': 'üìê',
                'Calculus': '‚à´',
                'Algebra': 'ùë•'
            };
            return icons[category] || 'üìê';
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        // Search news
        function searchNews() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) {
                displayNews(allNews);
                return;
            }

            const filtered = allNews.filter(news => 
                news.title.toLowerCase().includes(query) ||
                news.description.toLowerCase().includes(query) ||
                news.category.toLowerCase().includes(query) ||
                news.tags.some(tag => tag.includes(query))
            );

            displayNews(filtered);
        }

        // Filter news by category
        function filterNews(category) {
            currentFilter = category;
            
            // Update active tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            if (category === 'all') {
                displayNews(allNews);
            } else {
                const filtered = allNews.filter(news => 
                    news.category.toLowerCase().includes(category.toLowerCase()) ||
                    news.tags.some(tag => tag.includes(category.toLowerCase()))
                );
                displayNews(filtered);
            }
        }

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchNews();
            }
        });

        // Scroll to top
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show/hide scroll to top button
        window.addEventListener('scroll', () => {
            const scrollBtn = document.getElementById('scrollTopBtn');
            if (window.pageYOffset > 300) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        });

        // Initialize on load
        window.addEventListener('load', init);

        // Console message
        console.log('%cüìê Mathematics News Hub', 'background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-size: 20px; padding: 10px; border-radius: 5px;');
        console.log('%cCreated by Abdelouahab Mostafa', 'color: #667eea; font-size: 14px; font-weight: bold;');
        console.log('%cStay curious, stay mathematical! üöÄ', 'color: #764ba2; font-size: 12px;');

        // ============================================
        // ADVANCED FEATURES & UTILITIES
        // ============================================

        // Auto-refresh news periodically
        let autoRefreshInterval = null;
        const AUTO_REFRESH_TIME = 60000; // 1 minute

        function enableAutoRefresh() {
            if (autoRefreshInterval) return;
            
            autoRefreshInterval = setInterval(() => {
                console.log('üîÑ Auto-refreshing news...');
                // In production, this would fetch new data from API
                const notification = createNotification('News updated!', 'info');
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }, AUTO_REFRESH_TIME);
            
            showCustomNotification('Auto-refresh enabled', 'success');
        }

        function disableAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
                autoRefreshInterval = null;
                showCustomNotification('Auto-refresh disabled', 'info');
            }
        }

        // Custom notification system
        function showCustomNotification(message, type = 'info') {
            const colors = {
                success: 'linear-gradient(135deg, #48bb78, #38a169)',
                error: 'linear-gradient(135deg, #fc8181, #f56565)',
                warning: 'linear-gradient(135deg, #f6ad55, #ed8936)',
                info: 'linear-gradient(135deg, #667eea, #764ba2)'
            };

            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 30px;
                background: ${colors[type]};
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10001;
                animation: slideInRight 0.5s ease-out;
                font-weight: 600;
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-out';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        function createNotification(text, type) {
            const notif = document.createElement('div');
            notif.textContent = text;
            notif.style.cssText = `
                position: fixed; top: 100px; right: 30px; background: linear-gradient(135deg, #667eea, #764ba2);
                color: white; padding: 1rem 2rem; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10001; animation: slideInRight 0.5s ease-out; font-weight: 600;
            `;
            return notif;
        }

        // Add animation styles
        const animationStyles = document.createElement('style');
        animationStyles.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(animationStyles);

        // Bookmarking system
        let bookmarkedNews = JSON.parse(localStorage.getItem('bookmarkedNews') || '[]');

        function toggleBookmark(newsIndex) {
            const news = allNews[newsIndex];
            const existingIndex = bookmarkedNews.findIndex(b => b.title === news.title);

            if (existingIndex > -1) {
                bookmarkedNews.splice(existingIndex, 1);
                showCustomNotification('Removed from bookmarks', 'info');
            } else {
                bookmarkedNews.push(news);
                showCustomNotification('Added to bookmarks', 'success');
            }

            localStorage.setItem('bookmarkedNews', JSON.stringify(bookmarkedNews));
            updateBookmarkBadge();
        }

        function updateBookmarkBadge() {
            const badge = document.getElementById('bookmarkBadge');
            if (badge) {
                badge.textContent = bookmarkedNews.length;
                badge.style.display = bookmarkedNews.length > 0 ? 'inline-block' : 'none';
            }
        }

        function showBookmarks() {
            if (bookmarkedNews.length === 0) {
                showCustomNotification('No bookmarks yet', 'info');
                return;
            }
            displayNews(bookmarkedNews);
            showCustomNotification(`Showing ${bookmarkedNews.length} bookmarked articles`, 'info');
        }

        // Dark mode toggle
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            applyDarkMode();
        }

        function applyDarkMode() {
            if (isDarkMode) {
                document.body.style.background = 'linear-gradient(135deg, #1a202c 0%, #2d3748 100%)';
                document.querySelectorAll('.news-card').forEach(card => {
                    card.style.background = '#2d3748';
                    card.style.color = '#f7fafc';
                });
            } else {
                document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                document.querySelectorAll('.news-card').forEach(card => {
                    card.style.background = '#ffffff';
                    card.style.color = '#1a202c';
                });
            }
        }

        // Reading time estimator
        function estimateReadingTime(text) {
            const wordsPerMinute = 200;
            const wordCount = text.split(/\s+/).length;
            const minutes = Math.ceil(wordCount / wordsPerMinute);
            return minutes;
        }

        // Share functionality
        async function shareArticle(title, url) {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: title,
                        text: 'Check out this mathematics article!',
                        url: url
                    });
                    showCustomNotification('Article shared successfully', 'success');
                } catch (err) {
                    console.log('Share failed:', err);
                }
            } else {
                // Fallback: Copy to clipboard
                navigator.clipboard.writeText(url);
                showCustomNotification('Link copied to clipboard', 'success');
            }
        }

        // Related articles finder
        function findRelatedArticles(news) {
            return allNews.filter(article => 
                article.title !== news.title &&
                (article.category === news.category ||
                 article.tags.some(tag => news.tags.includes(tag)))
            ).slice(0, 3);
        }

        // Statistics tracker
        const statsTracker = {
            searches: 0,
            articlesViewed: 0,
            bookmarks: 0,
            filters: {},

            trackSearch() {
                this.searches++;
                this.saveStats();
            },

            trackArticleView() {
                this.articlesViewed++;
                this.saveStats();
            },

            trackFilter(category) {
                this.filters[category] = (this.filters[category] || 0) + 1;
                this.saveStats();
            },

            saveStats() {
                localStorage.setItem('newsHubStats', JSON.stringify(this));
            },

            loadStats() {
                const saved = localStorage.getItem('newsHubStats');
                if (saved) {
                    const data = JSON.parse(saved);
                    Object.assign(this, data);
                }
            },

            getStats() {
                return {
                    totalSearches: this.searches,
                    totalArticlesViewed: this.articlesViewed,
                    totalBookmarks: bookmarkedNews.length,
                    topFilter: Object.keys(this.filters).reduce((a, b) => 
                        this.filters[a] > this.filters[b] ? a : b, 'none')
                };
            }
        };

        // Export functionality
        function exportBookmarks() {
            const dataStr = JSON.stringify(bookmarkedNews, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'math-news-bookmarks.json';
            link.click();
            URL.revokeObjectURL(url);
            showCustomNotification('Bookmarks exported', 'success');
        }

        // Advanced search with filters
        function advancedSearch(query, options = {}) {
            const {
                category = null,
                dateFrom = null,
                dateTo = null,
                source = null
            } = options;

            let results = allNews.filter(news => {
                const matchesQuery = !query || 
                    news.title.toLowerCase().includes(query.toLowerCase()) ||
                    news.description.toLowerCase().includes(query.toLowerCase());

                const matchesCategory = !category || news.category === category;
                
                const newsDate = new Date(news.date);
                const matchesDateFrom = !dateFrom || newsDate >= new Date(dateFrom);
                const matchesDateTo = !dateTo || newsDate <= new Date(dateTo);
                
                const matchesSource = !source || news.source === source;

                return matchesQuery && matchesCategory && matchesDateFrom && matchesDateTo && matchesSource;
            });

            return results;
        }

        // Trending topics analyzer
        function analyzeTrendingTopics() {
            const tagCounts = {};
            allNews.forEach(news => {
                news.tags.forEach(tag => {
                    tagCounts[tag] = (tagCounts[tag] || 0) + 1;
                });
            });

            const trending = Object.entries(tagCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10)
                .map(([tag, count]) => ({ tag, count }));

            return trending;
        }

        // Display trending topics
        function showTrendingTopics() {
            const trending = analyzeTrendingTopics();
            console.log('üî• Trending Topics:', trending);
            
            let message = 'Trending: ';
            message += trending.slice(0, 5).map(t => `${t.tag} (${t.count})`).join(', ');
            showCustomNotification(message, 'info');
        }

        // News recommendation engine
        function getRecommendations(userInterests = []) {
            if (userInterests.length === 0) {
                // Use most popular category from stats
                const stats = statsTracker.getStats();
                userInterests = [stats.topFilter];
            }

            return allNews.filter(news => 
                news.tags.some(tag => userInterests.includes(tag)) ||
                userInterests.includes(news.category)
            ).slice(0, 5);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + K: Focus search
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }

            // Ctrl/Cmd + B: Show bookmarks
            if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
                e.preventDefault();
                showBookmarks();
            }

            // Ctrl/Cmd + D: Toggle dark mode
            if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                e.preventDefault();
                toggleDarkMode();
            }

            // Escape: Clear search
            if (e.key === 'Escape') {
                document.getElementById('searchInput').value = '';
                displayNews(allNews);
            }
        });

        // Print functionality
        function printArticle(newsIndex) {
            const news = allNews[newsIndex];
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>${news.title}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 2rem; max-width: 800px; margin: 0 auto; }
                        h1 { color: #667eea; }
                        .meta { color: #666; margin: 1rem 0; }
                        .content { line-height: 1.8; }
                    </style>
                </head>
                <body>
                    <h1>${news.title}</h1>
                    <div class="meta">
                        <p><strong>Category:</strong> ${news.category}</p>
                        <p><strong>Source:</strong> ${news.source}</p>
                        <p><strong>Date:</strong> ${news.date}</p>
                    </div>
                    <div class="content">
                        <p>${news.description}</p>
                    </div>
                    <p style="margin-top: 2rem; color: #667eea; font-weight: bold;">
                        Created by Abdelouahab Mostafa - Mathematics News Hub
                    </p>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Initialize advanced features
        statsTracker.loadStats();
        updateBookmarkBadge();
        applyDarkMode();

        // Performance monitoring
        const performanceMonitor = {
            pageLoadTime: 0,
            searchTimes: [],
            
            init() {
                window.addEventListener('load', () => {
                    this.pageLoadTime = performance.now();
                    console.log(`‚ö° Page loaded in ${this.pageLoadTime.toFixed(2)}ms`);
                });
            },
            
            trackSearch(startTime) {
                const duration = performance.now() - startTime;
                this.searchTimes.push(duration);
                console.log(`üîç Search completed in ${duration.toFixed(2)}ms`);
            },
            
            getAverageSearchTime() {
                if (this.searchTimes.length === 0) return 0;
                const sum = this.searchTimes.reduce((a, b) => a + b, 0);
                return (sum / this.searchTimes.length).toFixed(2);
            }
        };

        performanceMonitor.init();

        // Enhanced search with performance tracking
        const originalSearchNews = searchNews;
        searchNews = function() {
            const startTime = performance.now();
            statsTracker.trackSearch();
            originalSearchNews();
            performanceMonitor.trackSearch(startTime);
        };

        // Enhanced filter with tracking
        const originalFilterNews = filterNews;
        filterNews = function(category) {
            statsTracker.trackFilter(category);
            originalFilterNews(category);
        };

        // Welcome message with tips
        setTimeout(() => {
            const tips = [
                'üí° Tip: Press Ctrl+K to quickly search',
                'üí° Tip: Press Ctrl+B to view bookmarks',
                'üí° Tip: Press Ctrl+D to toggle dark mode',
                'üí° Tip: Use category filters for better results'
            ];
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            showCustomNotification(randomTip, 'info');
        }, 3000);

        // Show statistics in console
        setTimeout(() => {
            const stats = statsTracker.getStats();
            console.log('%cüìä Usage Statistics', 'color: #667eea; font-size: 16px; font-weight: bold;');
            console.table(stats);
            console.log(`‚ö° Average search time: ${performanceMonitor.getAverageSearchTime()}ms`);
        }, 5000);

        console.log('%c‚ú® All features loaded successfully!', 'color: #48bb78; font-size: 14px; font-weight: bold;');
        console.log('%cKeyboard Shortcuts: Ctrl+K (Search) | Ctrl+B (Bookmarks) | Ctrl+D (Dark Mode)', 'color: #f6ad55; font-size: 12px;');

        // ============================================
        // ADDITIONAL ADVANCED FEATURES
        // ============================================

        // Voice search functionality
        let recognition = null;
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                document.getElementById('searchInput').value = transcript;
                searchNews();
                showCustomNotification(`Searching for: ${transcript}`, 'info');
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                showCustomNotification('Voice search failed', 'error');
            };
        }

        function startVoiceSearch() {
            if (recognition) {
                recognition.start();
                showCustomNotification('Listening...', 'info');
            } else {
                showCustomNotification('Voice search not supported', 'warning');
            }
        }

        // Reading list functionality
        let readingList = JSON.parse(localStorage.getItem('readingList') || '[]');

        function addToReadingList(newsIndex) {
            const news = allNews[newsIndex];
            if (!readingList.find(item => item.title === news.title)) {
                readingList.push({
                    ...news,
                    addedDate: new Date().toISOString(),
                    progress: 0
                });
                localStorage.setItem('readingList', JSON.stringify(readingList));
                showCustomNotification('Added to reading list', 'success');
            } else {
                showCustomNotification('Already in reading list', 'info');
            }
        }

        function updateReadingProgress(newsTitle, progress) {
            const item = readingList.find(i => i.title === newsTitle);
            if (item) {
                item.progress = progress;
                item.lastRead = new Date().toISOString();
                localStorage.setItem('readingList', JSON.stringify(readingList));
            }
        }

        function getReadingList() {
            return readingList.sort((a, b) => new Date(b.addedDate) - new Date(a.addedDate));
        }

        // Article rating system
        let articleRatings = JSON.parse(localStorage.getItem('articleRatings') || '{}');

        function rateArticle(newsTitle, rating) {
            if (rating < 1 || rating > 5) {
                showCustomNotification('Rating must be between 1 and 5', 'warning');
                return;
            }

            articleRatings[newsTitle] = {
                rating: rating,
                ratedDate: new Date().toISOString()
            };

            localStorage.setItem('articleRatings', JSON.stringify(articleRatings));
            showCustomNotification(`Rated ${rating} stars`, 'success');
        }

        function getAverageRating() {
            const ratings = Object.values(articleRatings).map(r => r.rating);
            if (ratings.length === 0) return 0;
            return (ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(2);
        }

        function getTopRatedArticles(limit = 5) {
            return Object.entries(articleRatings)
                .sort((a, b) => b[1].rating - a[1].rating)
                .slice(0, limit)
                .map(([title, data]) => ({ title, ...data }));
        }

        // News categories manager
        const categoryManager = {
            categories: new Set(),
            
            init() {
                allNews.forEach(news => {
                    this.categories.add(news.category);
                });
            },

            getCategories() {
                return Array.from(this.categories).sort();
            },

            getCategoryCount(category) {
                return allNews.filter(news => news.category === category).length;
            },

            getMostPopularCategory() {
                const counts = {};
                allNews.forEach(news => {
                    counts[news.category] = (counts[news.category] || 0) + 1;
                });
                return Object.entries(counts).sort((a, b) => b[1] - a[1])[0];
            }
        };

        // Notification center
        const notificationCenter = {
            notifications: [],
            maxNotifications: 50,

            add(message, type, persistent = false) {
                this.notifications.unshift({
                    id: Date.now(),
                    message,
                    type,
                    timestamp: new Date().toISOString(),
                    persistent,
                    read: false
                });

                if (this.notifications.length > this.maxNotifications) {
                    this.notifications = this.notifications.slice(0, this.maxNotifications);
                }

                this.save();
            },

            markAsRead(notificationId) {
                const notif = this.notifications.find(n => n.id === notificationId);
                if (notif) {
                    notif.read = true;
                    this.save();
                }
            },

            getUnread() {
                return this.notifications.filter(n => !n.read);
            },

            clearAll() {
                this.notifications = [];
                this.save();
            },

            save() {
                localStorage.setItem('notifications', JSON.stringify(this.notifications));
            },

            load() {
                const saved = localStorage.getItem('notifications');
                if (saved) {
                    this.notifications = JSON.parse(saved);
                }
            }
        };

        // Text-to-speech for articles
        function readArticleAloud(newsIndex) {
            if ('speechSynthesis' in window) {
                const news = allNews[newsIndex];
                const utterance = new SpeechSynthesisUtterance();
                utterance.text = `${news.title}. ${news.description}`;
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                utterance.onstart = () => {
                    showCustomNotification('Reading article...', 'info');
                };

                utterance.onend = () => {
                    showCustomNotification('Finished reading', 'success');
                };

                window.speechSynthesis.speak(utterance);
            } else {
                showCustomNotification('Text-to-speech not supported', 'warning');
            }
        }

        function stopReading() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                showCustomNotification('Stopped reading', 'info');
            }
        }

        // Image placeholder generator
        function generatePlaceholder(category) {
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 200;
            const ctx = canvas.getContext('2d');

            const gradients = {
                'Number Theory': ['#667eea', '#764ba2'],
                'Pure Mathematics': ['#764ba2', '#f093fb'],
                'Applied Math': ['#f093fb', '#667eea'],
                'Topology': ['#4facfe', '#00f2fe'],
                'Statistics': ['#43e97b', '#38f9d7'],
                'Geometry': ['#fa709a', '#fee140'],
                'Calculus': ['#fee140', '#30cfd0'],
                'Algebra': ['#30cfd0', '#330867']
            };

            const colors = gradients[category] || ['#667eea', '#764ba2'];
            const gradient = ctx.createLinearGradient(0, 0, 400, 200);
            gradient.addColorStop(0, colors[0]);
            gradient.addColorStop(1, colors[1]);

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 200);

            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(getCategoryIcon(category), 200, 100);

            return canvas.toDataURL();
        }

        // Lazy loading manager
        const lazyLoadManager = {
            observer: null,
            
            init() {
                if ('IntersectionObserver' in window) {
                    this.observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                if (img.dataset.src) {
                                    img.src = img.dataset.src;
                                    img.removeAttribute('data-src');
                                    this.observer.unobserve(img);
                                }
                            }
                        });
                    });
                }
            },

            observe(element) {
                if (this.observer) {
                    this.observer.observe(element);
                }
            }
        };

        // Search history manager
        const searchHistory = {
            history: [],
            maxHistory: 20,

            add(query) {
                if (!query || query.trim() === '') return;

                this.history = this.history.filter(h => h.query !== query);
                this.history.unshift({
                    query: query,
                    timestamp: new Date().toISOString(),
                    resultsCount: 0
                });

                if (this.history.length > this.maxHistory) {
                    this.history = this.history.slice(0, this.maxHistory);
                }

                this.save();
            },

            updateResultsCount(query, count) {
                const item = this.history.find(h => h.query === query);
                if (item) {
                    item.resultsCount = count;
                    this.save();
                }
            },

            get() {
                return this.history;
            },

            clear() {
                this.history = [];
                this.save();
            },

            save() {
                localStorage.setItem('searchHistory', JSON.stringify(this.history));
            },

            load() {
                const saved = localStorage.getItem('searchHistory');
                if (saved) {
                    this.history = JSON.parse(saved);
                }
            },

            getMostSearched(limit = 5) {
                const queryCounts = {};
                this.history.forEach(h => {
                    queryCounts[h.query] = (queryCounts[h.query] || 0) + 1;
                });
                return Object.entries(queryCounts)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, limit)
                    .map(([query, count]) => ({ query, count }));
            }
        };

        // Content filter and moderation
        const contentFilter = {
            sensitiveWords: [],
            
            addSensitiveWord(word) {
                this.sensitiveWords.push(word.toLowerCase());
            },

            checkContent(text) {
                const lowerText = text.toLowerCase();
                return this.sensitiveWords.some(word => lowerText.includes(word));
            },

            filterNews(newsArray) {
                return newsArray.filter(news => 
                    !this.checkContent(news.title) && 
                    !this.checkContent(news.description)
                );
            }
        };

        // Offline mode detection
        let isOffline = !navigator.onLine;

        window.addEventListener('online', () => {
            isOffline = false;
            showCustomNotification('Back online! üåê', 'success');
            document.body.style.filter = 'none';
        });

        window.addEventListener('offline', () => {
            isOffline = true;
            showCustomNotification('You are offline üì°', 'warning');
            document.body.style.filter = 'grayscale(50%)';
        });

        function checkOnlineStatus() {
            return !isOffline;
        }

        // Article comparison tool
        function compareArticles(newsIndex1, newsIndex2) {
            const article1 = allNews[newsIndex1];
            const article2 = allNews[newsIndex2];

            const comparison = {
                sameCategory: article1.category === article2.category,
                sameSource: article1.source === article2.source,
                commonTags: article1.tags.filter(tag => article2.tags.includes(tag)),
                timeDifference: Math.abs(new Date(article1.date) - new Date(article2.date)) / (1000 * 60 * 60 * 24),
                similarity: calculateSimilarity(article1, article2)
            };

            return comparison;
        }

        function calculateSimilarity(article1, article2) {
            let score = 0;
            
            if (article1.category === article2.category) score += 30;
            
            const commonTags = article1.tags.filter(tag => article2.tags.includes(tag));
            score += commonTags.length * 10;

            const words1 = article1.title.toLowerCase().split(' ');
            const words2 = article2.title.toLowerCase().split(' ');
            const commonWords = words1.filter(word => words2.includes(word) && word.length > 3);
            score += commonWords.length * 5;

            return Math.min(100, score);
        }

        // Citation generator
        function generateCitation(newsIndex, style = 'APA') {
            const news = allNews[newsIndex];
            const date = new Date(news.date);
            const year = date.getFullYear();
            const month = date.toLocaleDateString('en-US', { month: 'long' });
            const day = date.getDate();

            const citations = {
                APA: `${news.source}. (${year}, ${month} ${day}). ${news.title}. ${news.category}.`,
                MLA: `"${news.title}." ${news.source}, ${day} ${month} ${year}.`,
                Chicago: `${news.source}. "${news.title}." ${news.category}, ${month} ${day}, ${year}.`,
                Harvard: `${news.source} (${year}) '${news.title}', ${news.category}, ${day} ${month}.`
            };

            return citations[style] || citations.APA;
        }

        // Analytics dashboard data
        const analyticsDashboard = {
            getInsights() {
                return {
                    totalArticles: allNews.length,
                    totalBookmarks: bookmarkedNews.length,
                    totalSearches: statsTracker.searches,
                    categoriesCount: categoryManager.getCategories().length,
                    averageRating: getAverageRating(),
                    mostPopularCategory: categoryManager.getMostPopularCategory(),
                    readingListSize: readingList.length,
                    unreadNotifications: notificationCenter.getUnread().length,
                    searchHistorySize: searchHistory.history.length,
                    topSearchQueries: searchHistory.getMostSearched(3),
                    isOnline: checkOnlineStatus()
                };
            },

            displayInConsole() {
                const insights = this.getInsights();
                console.log('%cüìä Analytics Dashboard', 'background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-size: 18px; padding: 10px; border-radius: 5px;');
                console.table(insights);
            }
        };

        // Initialize new features
        categoryManager.init();
        notificationCenter.load();
        searchHistory.load();
        lazyLoadManager.init();

        // Add notifications for major events
        const originalDisplayNews = displayNews;
        displayNews = function(newsArray) {
            notificationCenter.add(`Displaying ${newsArray.length} articles`, 'info');
            originalDisplayNews(newsArray);
        };

        // Show analytics after initialization
        setTimeout(() => {
            analyticsDashboard.displayInConsole();
        }, 7000);

        // Random math fact generator
        const mathFacts = [
            "The only number that is not divisible by 2 or 3 but all its multiples are is 1",
            "In a room of 23 people, there's a 50% chance two share a birthday",
            "The sum of all angles in a triangle always equals 180 degrees",
            "Zero is the only number that cannot be represented in Roman numerals",
            "A 'googol' is 10^100, and a 'googolplex' is 10^googol",
            "Pi has been calculated to over 100 trillion digits",
            "The Fibonacci sequence appears throughout nature",
            "Every odd number contains the letter 'e' when spelled out"
        ];

        function showRandomMathFact() {
            const fact = mathFacts[Math.floor(Math.random() * mathFacts.length)];
            showCustomNotification(`üé≤ ${fact}`, 'info');
        }

        // Show random fact every 30 seconds
        setInterval(showRandomMathFact, 30000);

        console.log('%cüöÄ Advanced features loaded! Total: 25+ new features', 'color: #48bb78; font-size: 16px; font-weight: bold;');
        console.log('%cüì± Features: Voice Search, Reading List, Ratings, Text-to-Speech, Citations, Analytics & more!', 'color: #667eea; font-size: 12px;');
        console.log('%cüíª Created by Abdelouahab Mostafa - Mathematics News Hub Pro', 'color: #764ba2; font-size: 14px; font-weight: bold;');

        // ============================================
        // MEGA ADVANCED FEATURES - ULTIMATE EDITION
        // ============================================

        // Particle system generator
        function createParticles(count = 20) {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b'];
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.cssText = `
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}%;
                    animation-delay: ${Math.random() * 5}s;
                    animation-duration: ${Math.random() * 10 + 10}s;
                `;
                document.body.appendChild(particle);
            }
        }

        // Advanced theme manager
        const themeManager = {
            themes: {
                default: {
                    primary: '#667eea',
                    secondary: '#764ba2',
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
                },
                ocean: {
                    primary: '#4facfe',
                    secondary: '#00f2fe',
                    background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
                },
                sunset: {
                    primary: '#fa709a',
                    secondary: '#fee140',
                    background: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
                },
                forest: {
                    primary: '#43e97b',
                    secondary: '#38f9d7',
                    background: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)'
                },
                midnight: {
                    primary: '#2c3e50',
                    secondary: '#34495e',
                    background: 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)'
                }
            },

            current: 'default',

            apply(themeName) {
                if (this.themes[themeName]) {
                    const theme = this.themes[themeName];
                    document.body.style.background = theme.background;
                    document.documentElement.style.setProperty('--primary', theme.primary);
                    document.documentElement.style.setProperty('--secondary', theme.secondary);
                    this.current = themeName;
                    localStorage.setItem('selectedTheme', themeName);
                    showCustomNotification(`Theme changed to ${themeName}`, 'success');
                }
            },

            load() {
                const saved = localStorage.getItem('selectedTheme');
                if (saved && this.themes[saved]) {
                    this.apply(saved);
                }
            }
        };

        // Quiz system
        const mathQuiz = {
            questions: [
                {
                    question: "What is the value of œÄ (pi) approximately?",
                    options: ["3.14159", "2.71828", "1.41421", "1.61803"],
                    correct: 0,
                    difficulty: "easy"
                },
                {
                    question: "What is the derivative of x¬≤?",
                    options: ["x", "2x", "x¬≥", "2x¬≤"],
                    correct: 1,
                    difficulty: "medium"
                },
                {
                    question: "What is Euler's number (e) approximately?",
                    options: ["3.14159", "2.71828", "1.41421", "1.61803"],
                    correct: 1,
                    difficulty: "medium"
                },
                {
                    question: "What is the integral of 1/x?",
                    options: ["ln(x)", "x¬≤", "e^x", "1/x¬≤"],
                    correct: 0,
                    difficulty: "hard"
                },
                {
                    question: "What is the sum of angles in a triangle?",
                    options: ["90¬∞", "180¬∞", "270¬∞", "360¬∞"],
                    correct: 1,
                    difficulty: "easy"
                }
            ],

            currentQuestion: 0,
            score: 0,
            history: [],

            start() {
                this.currentQuestion = 0;
                this.score = 0;
                this.showQuestion();
            },

            showQuestion() {
                if (this.currentQuestion >= this.questions.length) {
                    this.endQuiz();
                    return;
                }

                const q = this.questions[this.currentQuestion];
                console.log(`\nüìù Question ${this.currentQuestion + 1}/${this.questions.length}`);
                console.log(`${q.question}`);
                q.options.forEach((opt, i) => console.log(`${i + 1}. ${opt}`));
            },

            answer(optionIndex) {
                const q = this.questions[this.currentQuestion];
                const isCorrect = optionIndex === q.correct;
                
                if (isCorrect) {
                    this.score++;
                    showCustomNotification('Correct! ‚úì', 'success');
                } else {
                    showCustomNotification('Incorrect ‚úó', 'error');
                }

                this.history.push({
                    question: q.question,
                    userAnswer: optionIndex,
                    correctAnswer: q.correct,
                    isCorrect
                });

                this.currentQuestion++;
                this.showQuestion();
            },

            endQuiz() {
                const percentage = (this.score / this.questions.length * 100).toFixed(1);
                console.log(`\nüéâ Quiz Complete!`);
                console.log(`Score: ${this.score}/${this.questions.length} (${percentage}%)`);
                showCustomNotification(`Quiz Score: ${this.score}/${this.questions.length}`, 'info');
            }
        };

        // Achievement system
        const achievementSystem = {
            achievements: [
                { id: 'first_search', name: 'First Steps', description: 'Performed first search', unlocked: false },
                { id: 'bookworm', name: 'Bookworm', description: 'Bookmarked 10 articles', unlocked: false },
                { id: 'speed_reader', name: 'Speed Reader', description: 'Read 50 articles', unlocked: false },
                { id: 'master_searcher', name: 'Master Searcher', description: '100 searches performed', unlocked: false },
                { id: 'theme_collector', name: 'Theme Collector', description: 'Tried all themes', unlocked: false },
                { id: 'quiz_master', name: 'Quiz Master', description: 'Perfect quiz score', unlocked: false },
                { id: 'early_bird', name: 'Early Bird', description: 'Visited site before 6 AM', unlocked: false },
                { id: 'night_owl', name: 'Night Owl', description: 'Visited site after 11 PM', unlocked: false }
            ],

            check(achievementId) {
                const achievement = this.achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.unlocked) {
                    achievement.unlocked = true;
                    achievement.unlockedDate = new Date().toISOString();
                    this.save();
                    this.showUnlock(achievement);
                }
            },

            showUnlock(achievement) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #ffd700, #ffed4e);
                    color: #333;
                    padding: 2rem;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
                    z-index: 10001;
                    text-align: center;
                    animation: bounceIn 0.6s;
                    max-width: 400px;
                `;
                notification.innerHTML = `
                    <div style="font-size: 3rem;">üèÜ</div>
                    <h2 style="margin: 1rem 0;">Achievement Unlocked!</h2>
                    <h3 style="color: #667eea;">${achievement.name}</h3>
                    <p style="color: #666;">${achievement.description}</p>
                `;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 4000);
            },

            save() {
                localStorage.setItem('achievements', JSON.stringify(this.achievements));
            },

            load() {
                const saved = localStorage.getItem('achievements');
                if (saved) {
                    this.achievements = JSON.parse(saved);
                }
            },

            getProgress() {
                const unlocked = this.achievements.filter(a => a.unlocked).length;
                return {
                    unlocked,
                    total: this.achievements.length,
                    percentage: (unlocked / this.achievements.length * 100).toFixed(1)
                };
            }
        };

        // Advanced animation controller
        const animationController = {
            animations: {
                confetti: () => {
                    for (let i = 0; i < 50; i++) {
                        const confetti = document.createElement('div');
                        confetti.style.cssText = `
                            position: fixed;
                            width: 10px;
                            height: 10px;
                            background: ${['#667eea', '#764ba2', '#f093fb', '#ffd700'][Math.floor(Math.random() * 4)]};
                            top: -20px;
                            left: ${Math.random() * 100}%;
                            animation: confettiFall ${Math.random() * 3 + 2}s linear;
                            z-index: 10000;
                        `;
                        document.body.appendChild(confetti);
                        setTimeout(() => confetti.remove(), 5000);
                    }
                },

                fireworks: () => {
                    const firework = document.createElement('div');
                    firework.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        width: 5px;
                        height: 5px;
                        background: #ffd700;
                        border-radius: 50%;
                        animation: explode 1s ease-out;
                        z-index: 10000;
                    `;
                    document.body.appendChild(firework);
                    setTimeout(() => firework.remove(), 1000);
                }
            },

            play(animationName) {
                if (this.animations[animationName]) {
                    this.animations[animationName]();
                }
            }
        };

        // Add confetti animation to styles
        const confettiStyle = document.createElement('style');
        confettiStyle.textContent = `
            @keyframes confettiFall {
                to {
                    transform: translateY(100vh) rotate(360deg);
                    opacity: 0;
                }
            }
            @keyframes explode {
                0% { transform: scale(1); opacity: 1; }
                100% { transform: scale(20); opacity: 0; }
            }
        `;
        document.head.appendChild(confettiStyle);

        // Gesture recognizer (for touch devices)
        class GestureRecognizer {
            constructor() {
                this.startX = 0;
                this.startY = 0;
                this.threshold = 50;
                this.init();
            }

            init() {
                document.addEventListener('touchstart', (e) => {
                    this.startX = e.touches[0].clientX;
                    this.startY = e.touches[0].clientY;
                });

                document.addEventListener('touchend', (e) => {
                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    this.detectSwipe(endX, endY);
                });
            }

            detectSwipe(endX, endY) {
                const deltaX = endX - this.startX;
                const deltaY = endY - this.startY;

                if (Math.abs(deltaX) > this.threshold) {
                    if (deltaX > 0) {
                        this.onSwipeRight();
                    } else {
                        this.onSwipeLeft();
                    }
                }

                if (Math.abs(deltaY) > this.threshold) {
                    if (deltaY > 0) {
                        this.onSwipeDown();
                    } else {
                        this.onSwipeUp();
                    }
                }
            }

            onSwipeLeft() {
                console.log('Swiped left');
                showCustomNotification('Swiped left! Try double tap for surprises', 'info');
            }

            onSwipeRight() {
                console.log('Swiped right');
                showCustomNotification('Swiped right! Keep exploring', 'info');
            }

            onSwipeUp() {
                scrollToTop();
            }

            onSwipeDown() {
                console.log('Swiped down');
            }
        }

        // Word cloud generator
        class WordCloud {
            constructor(words) {
                this.words = words;
            }

            generate() {
                const wordCounts = {};
                this.words.forEach(word => {
                    wordCounts[word] = (wordCounts[word] || 0) + 1;
                });

                return Object.entries(wordCounts)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 20);
            }

            getFromNews() {
                const allWords = [];
                allNews.forEach(news => {
                    const words = news.title.toLowerCase().split(/\s+/);
                    allWords.push(...words.filter(w => w.length > 4));
                });
                return this.generate.call({ words: allWords });
            }
        }

        // Advanced search with AI-like scoring
        class SmartSearch {
            constructor() {
                this.weights = {
                    title: 3,
                    description: 2,
                    tags: 1.5,
                    category: 1
                };
            }

            search(query, articles = allNews) {
                const queryLower = query.toLowerCase();
                const queryWords = queryLower.split(/\s+/);

                const scored = articles.map(article => {
                    let score = 0;

                    queryWords.forEach(word => {
                        if (article.title.toLowerCase().includes(word)) {
                            score += this.weights.title;
                        }
                        if (article.description.toLowerCase().includes(word)) {
                            score += this.weights.description;
                        }
                        if (article.tags.some(tag => tag.includes(word))) {
                            score += this.weights.tags;
                        }
                        if (article.category.toLowerCase().includes(word)) {
                            score += this.weights.category;
                        }
                    });

                    return { article, score };
                });

                return scored
                    .filter(item => item.score > 0)
                    .sort((a, b) => b.score - a.score)
                    .map(item => item.article);
            }
        }

        // Session manager
        const sessionManager = {
            sessionId: null,
            startTime: null,
            events: [],

            init() {
                this.sessionId = Date.now().toString(36) + Math.random().toString(36).substr(2);
                this.startTime = new Date();
                this.trackEvent('session_start');
            },

            trackEvent(eventName, data = {}) {
                this.events.push({
                    event: eventName,
                    timestamp: new Date().toISOString(),
                    data
                });
            },

            getDuration() {
                return Math.floor((new Date() - this.startTime) / 1000);
            },

            getSummary() {
                return {
                    sessionId: this.sessionId,
                    duration: this.getDuration(),
                    eventsCount: this.events.length,
                    events: this.events
                };
            }
        };

        // Initialize mega features
        themeManager.load();
        achievementSystem.load();
        sessionManager.init();
        createParticles(15);
        const gestureRecognizer = new GestureRecognizer();
        const smartSearch = new SmartSearch();

        // Check time-based achievements
        const hour = new Date().getHours();
        if (hour < 6) achievementSystem.check('early_bird');
        if (hour >= 23) achievementSystem.check('night_owl');

        // Enhanced search with smart scoring
        const originalSmartSearch = searchNews;
        searchNews = function() {
            const query = document.getElementById('searchInput').value;
            if (query) {
                achievementSystem.check('first_search');
                searchHistory.add(query);
                const results = smartSearch.search(query);
                displayNews(results);
                searchHistory.updateResultsCount(query, results.length);
            } else {
                originalSmartSearch();
            }
        };

        // Check achievements periodically
        setInterval(() => {
            if (statsTracker.searches >= 100) achievementSystem.check('master_searcher');
            if (bookmarkedNews.length >= 10) achievementSystem.check('bookworm');
            if (statsTracker.articlesViewed >= 50) achievementSystem.check('speed_reader');
        }, 5000);

        // Easter egg: Triple click for surprise
        let clickCount = 0;
        let clickTimer = null;
        document.addEventListener('click', () => {
            clickCount++;
            clearTimeout(clickTimer);
            clickTimer = setTimeout(() => {
                if (clickCount === 3) {
                    animationController.play('confetti');
                    showCustomNotification('üéâ Easter egg found! Enjoy the confetti!', 'success');
                }
                clickCount = 0;
            }, 500);
        });

        // Console commands guide
        console.log('\n%cüéÆ Available Commands:', 'color: #667eea; font-size: 18px; font-weight: bold;');
        console.log('%cthemeManager.apply("ocean") - Change theme', 'color: #4facfe;');
        console.log('%cmathQuiz.start() - Start math quiz', 'color: #43e97b;');
        console.log('%canimationController.play("confetti") - Play confetti', 'color: #ffd700;');
        console.log('%cachievementSystem.getProgress() - View achievements', 'color: #fa709a;');
        console.log('%csessionManager.getSummary() - Session info', 'color: #764ba2;');
        console.log('%cnew WordCloud().getFromNews() - Generate word cloud', 'color: #f6ad55;');

        // Final initialization message
        setTimeout(() => {
            const progress = achievementSystem.getProgress();
            console.log(`\n%c‚ú® ULTIMATE EDITION LOADED ‚ú®`, 'background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-size: 20px; padding: 10px; border-radius: 10px;');
            console.log(`%cüèÜ Achievements: ${progress.unlocked}/${progress.total} (${progress.percentage}%)`, 'color: #ffd700; font-size: 14px;');
            console.log(`%c‚è±Ô∏è Session Duration: ${sessionManager.getDuration()}s`, 'color: #4facfe; font-size: 14px;');
            console.log(`%cüíé Total Features: 50+ Advanced Systems`, 'color: #43e97b; font-size: 14px;');
            console.log(`%cüë®‚Äçüíª Created by Abdelouahab Mostafa - Mathematics News Hub ULTIMATE`, 'color: #764ba2; font-size: 16px; font-weight: bold;');
        }, 8000);
    </script>
</body>
</html>
